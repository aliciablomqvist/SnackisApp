@page
@model MessagesModel
@{
    ViewData["Title"] = "Messages";
}

<h2>Messages</h2>

<div>
    <a asp-page="/SendMessage" class="btn btn-primary">Write a New Message</a>
</div>

<h3>Inbox</h3>

@if (Model.ReceivedMessages != null && Model.ReceivedMessages.Count > 0)
{
    <ul>
    @foreach (var message in Model.ReceivedMessages)
    {
        <li>
            <strong>From:</strong> @message.Sender.UserName<br />
            <strong>Date:</strong> @message.DateSent<br />
            <p>@message.Content</p>
        </li>
    }
    </ul>
}
else
{
    <p>No messages received.</p>
}

<h3>Sent</h3>

@if (Model.SentMessages != null && Model.SentMessages.Count > 0)
{
    <ul>
    @foreach (var message in Model.SentMessages)
    {
        <li>
            <strong>To:</strong> @message.Recipient.UserName<br />
            <strong>Date:</strong> @message.DateSent<br />
            <p>@message.Content</p>
        </li>
    }
    </ul>
}
else
{
    <p>No messages sent.</p>
}
